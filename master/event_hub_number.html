<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: event_hub_number</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: event_hub_number</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>event_hub_number<span class="signature">()</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="event_hub_number"><span class="type-signature"></span>new event_hub_number<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Transaction processing in fabric v1.1 is a long operation spanning multiple
components (application, endorsing peer, orderer, committing peer) and takes
a relatively lengthy period of time (think seconds instead of milliseconds)
to complete. As a result the applications must design their handling of the
transaction lifecycle in an asynchronous fashion. After the transaction proposal
has been successfully <a href="Channel.html#sendTransactionProposal">endorsed</a>, and before
the transaction message has been successfully <a href="Channel.html#sendTransaction">sent</a>
to the orderer, the application should register a listener to be notified
when the transaction achieves finality, which is when the block
containing the transaction gets added to the peer's ledger/blockchain.
<br><br>
Fabric committing peers provide a block delivery service to publish blocks or
filtered blocks to connected fabric-clients. See <a href="ChannelEventHub.html#connect">connect</a>
on connection options and how this ChannelEventHub may connect to the fabric
service. For more information on the service see <a href="https://hyperledger-fabric.readthedocs.io/en/release-1.2/peer_event_services.html">deliver</a>.
A block gets published whenever the committing peer adds a validated block
to the ledger.
When a fabric-client receives a block it will investigate the block and notify
interested listeners with the related contents of the block (e.g. transactionId, status).
There are three types of listeners that will get notified by
the fabric-client after it receives a published block from the fabric deliver service.
<li> A "block listener" gets called for every block received. The listener
    will be passed a fully decoded <a href="global.html#Block">Block</a> object unless the connection
    to the fabric service is using filtered blocks.
    See <a href="ChannelEventHub.html#registerBlockEvent">registerBlockEvent</a>
<li>A "transaction listener" gets called when the specific transaction
    is committed (discovered inside a published block). The listener
    may also be registered to listen to "all" transactions.
    The listener will be passed the transaction id, transaction status and block number.
    See <a href="ChannelEventHub.html#registerTxEvent">registerTxEvent</a>
<li>A "chaincode event listener" gets called when a specific
    chaincode event is discovered within a block.
    The listener will be passed the block number, transaction id, and
    transaction status. The <a href="global.html#ChaincodeEvent">ChaincodeEvent</a> will be also be passed,
    however the payload of the event will not be passed if
    the connection to the fabric service is publishing filtered blocks.
    See <a href="ChannelEventHub.html#registerChaincodeEvent">registerChaincodeEvent</a>
<br><br><br>
When the fabric-client connects to the peer, it tells the peer which block
to begin delivering from. If no start block is provided, then the client will
only receive events for the most recently committed block onwards.
To avoid missing events in blocks that are published while the client is
crashed/offline, the client should record the most recently processed block,
and resume event delivery from this block number on startup. In this way,
there is no custom recovery path for missed events, and the normal processing
code may execute instead. You may also include an endBlock number if you
wish to stop listening after receiving a range of events.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="fabric-client_lib_ChannelEventHub.js.html">fabric-client/lib/ChannelEventHub.js</a>, <a href="fabric-client_lib_ChannelEventHub.js.html#line135">line 135</a>
    </li></ul></dd>
    

    

    

    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const eh = channel.newChannelEventHub(peer);

// register the listener before calling "connect()" so there
// is an error callback ready to process an error in case the
// connect() call fails
eh.registerTxEvent(
  'all', // this listener will be notified of all transactions
    (tx, status, block_num) => {
       record(tx, status, block_num);
       console.log(util.format('Transaction %s has completed', tx));
    },
    (err) => {
       eh.unregisterTxEvent('all');
       reportError(err);
       console.log(util.format('Error %s! Transaction listener has been ' +
                'deregistered for %s', err, eh.getPeerAddr()));
    }
);

eh.connect();</code></pre>



    
    </div>

    

    

    

    

    

    

    

    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-fabric-network.html">fabric-network</a></li></ul><h3>Classes</h3><ul><li><a href="AffiliationService.html">AffiliationService</a></li><li><a href="BasePackager.html">BasePackager</a></li><li><a href="BasicCommitHandler.html">BasicCommitHandler</a></li><li><a href="BlockDecoder.html">BlockDecoder</a></li><li><a href="CertificateAuthority.html">CertificateAuthority</a></li><li><a href="Chaincode.html">Chaincode</a></li><li><a href="ChaincodeRegistration.html">ChaincodeRegistration</a></li><li><a href="Channel.html">Channel</a></li><li><a href="ChannelEventHub.html">ChannelEventHub</a></li><li><a href="ChannelPeer.html">ChannelPeer</a></li><li><a href="Client.html">Client</a></li><li><a href="CommitHandler.html">CommitHandler</a></li><li><a href="DiscoveryEndorsementHandler.html">DiscoveryEndorsementHandler</a></li><li><a href="EndorsementHandler.html">EndorsementHandler</a></li><li><a href="EndorsementPolicy.html">EndorsementPolicy</a></li><li><a href="Endpoint.html">Endpoint</a></li><li><a href="event_hub_number.html">event_hub_number</a></li><li><a href="FabricCAClient.html">FabricCAClient</a></li><li><a href="FabricCAServices.html">FabricCAServices</a></li><li><a href="IdentityService.html">IdentityService</a></li><li><a href="module-fabric-network.AbstractEventHubSelectionStrategy.html">AbstractEventHubSelectionStrategy</a></li><li><a href="module-fabric-network.AbstractEventListener.html">AbstractEventListener</a></li><li><a href="module-fabric-network.BaseCheckpointer.html">BaseCheckpointer</a></li><li><a href="module-fabric-network.CommitEventListener.html">CommitEventListener</a></li><li><a href="module-fabric-network.Contract.html">Contract</a></li><li><a href="module-fabric-network.ContractEventListener.html">ContractEventListener</a></li><li><a href="module-fabric-network.EventHubDisconnectError.html">EventHubDisconnectError</a></li><li><a href="module-fabric-network.EventHubManager.html">EventHubManager</a></li><li><a href="module-fabric-network.FabricError.html">FabricError</a></li><li><a href="module-fabric-network.FileSystemCheckpointer.html">FileSystemCheckpointer</a></li><li><a href="module-fabric-network.Gateway.html">Gateway</a></li><li><a href="module-fabric-network.HsmX509Provider.html">HsmX509Provider</a></li><li><a href="module-fabric-network.IdentityProviderRegistry.html">IdentityProviderRegistry</a></li><li><a href="module-fabric-network.Network.html">Network</a></li><li><a href="module-fabric-network.Query.html">Query</a></li><li><a href="module-fabric-network.RoundRobinEventHubSelectionStrategy.html">RoundRobinEventHubSelectionStrategy</a></li><li><a href="module-fabric-network.TimeoutError.html">TimeoutError</a></li><li><a href="module-fabric-network.Transaction.html">Transaction</a></li><li><a href="module-fabric-network.Wallet.html">Wallet</a></li><li><a href="module-fabric-network.Wallets.html">Wallets</a></li><li><a href="MSP.html">MSP</a></li><li><a href="MSPManager.html">MSPManager</a></li><li><a href="NetworkConfig_1_0.html">NetworkConfig_1_0</a></li><li><a href="Orderer.html">Orderer</a></li><li><a href="Organization.html">Organization</a></li><li><a href="Peer.html">Peer</a></li><li><a href="Remote.html">Remote</a></li><li><a href="TransactionID.html">TransactionID</a></li></ul><h3>Interfaces</h3><ul><li><a href="module-fabric-network.WalletStore.html">WalletStore</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-app-dev-env-setup.html">Setting up the Application Developer's Environment</a></li><li><a href="tutorial-chaincode-lifecycle.html">fabric-client: How to install and start your chaincode</a></li><li><a href="tutorial-channel-create.html">fabric-client: How to create a Hyperledger Fabric channel</a></li><li><a href="tutorial-channel-events.html">fabric-client: How to use the channel-based event service</a></li><li><a href="tutorial-discovery.html">fabric-client: How to use the discovery service</a></li><li><a href="tutorial-event-checkpointer.html">fabric-network: How to replay missed events</a></li><li><a href="tutorial-event-hub-management.html">fabric-network: How to automatically select and reconnect to event hubs</a></li><li><a href="tutorial-grpc-settings.html">fabric-client: How to set gRPC settings</a></li><li><a href="tutorial-handlers.html">fabric-client: How to use the endorsement and commit handlers</a></li><li><a href="tutorial-listening-to-events.html">fabric-network: How to listen to events</a></li><li><a href="tutorial-logging.html">fabric-client: How to use logging</a></li><li><a href="tutorial-metadata-chaincode.html">fabric-client: How to add CouchDB indexes during chaincode installation</a></li><li><a href="tutorial-mutual-tls.html">fabric-client: How to configure mutual TLS</a></li><li><a href="tutorial-network-config.html">fabric-client: How to use a common connection profile</a></li><li><a href="tutorial-private-data.html">How to use private data</a></li><li><a href="tutorial-query-peers.html">fabric-network: How to select peers for evaluating transactions (queries)</a></li><li><a href="tutorial-sign-transaction-offline.html">Working with an offline private key</a></li><li><a href="tutorial-transaction-commit-events.html">fabric-network: How to wait for transactions to be committed to the ledger</a></li><li><a href="tutorial-wallet.html">fabric-network: Using wallets to manage identities</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CLIENT">CLIENT</a></li><li><a href="global.html#finalPackage">finalPackage</a></li><li><a href="global.html#HFAFFILIATIONMGR">HFAFFILIATIONMGR</a></li><li><a href="global.html#HFGENCRL">HFGENCRL</a></li><li><a href="global.html#HFINTERMEDIATECA">HFINTERMEDIATECA</a></li><li><a href="global.html#HFREGISTRARATTRIBUTES">HFREGISTRARATTRIBUTES</a></li><li><a href="global.html#HFREGISTRARDELEGATEROLES">HFREGISTRARDELEGATEROLES</a></li><li><a href="global.html#HFREGISTRARROLES">HFREGISTRARROLES</a></li><li><a href="global.html#HFREVOKER">HFREVOKER</a></li><li><a href="global.html#loadConfigGroup">loadConfigGroup</a></li><li><a href="global.html#loadConfigValue">loadConfigValue</a></li><li><a href="global.html#ORDERER">ORDERER</a></li><li><a href="global.html#package">package</a></li><li><a href="global.html#PEER">PEER</a></li><li><a href="global.html#toEnvelope">toEnvelope</a></li><li><a href="global.html#USER">USER</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Fri Dec 13 2019 12:05:42 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>